

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>viscid.vutil module &mdash; Viscid 0.70.3 documentation</title>
  

  
  

  
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'./',
        VERSION:'0.70.3',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="Viscid 0.70.3 documentation" href="index.html"/>
        <link rel="up" title="viscid package" href="viscid.html"/>
        <link rel="prev" title="viscid.vlab module" href="viscid.vlab.html"/> 

  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="icon icon-home"> Viscid</a>
        <form class="wy-form" action="search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#standard-setup">Standard Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#for-developers">For Developers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="philosophy.html">Philosophy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="philosophy.html#data-abstraction">Data Abstraction</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="custom_behavior.html">Custom Behavior (rc file)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="custom_behavior.html#common-customizations">Common Customizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_behavior.html#viscid-grid-grid">viscid.grid.Grid</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_behavior.html#viscid-readers-openggcm-ggcmgrid">viscid.readers.openggcm.GGCMGrid</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_behavior.html#viscid-readers-openggcm-ggcmfile">viscid.readers.openggcm.GGCMFile</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ex_reader.html">Reading/Plotting Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ex_reader.html#super-simple">Super Simple</a></li>
<li class="toctree-l2"><a class="reference internal" href="ex_reader.html#two-plots-one-figure">Two Plots, One Figure</a></li>
<li class="toctree-l2"><a class="reference internal" href="ex_reader.html#playing-with-time">Playing with Time</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ex_slicing.html">Slicing Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ex_slicing.html#spatial-slices">Spatial Slices</a></li>
<li class="toctree-l2"><a class="reference internal" href="ex_slicing.html#temporal-slices">Temporal Slices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ex_openggcm.html">OpenGGCM Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ex_openggcm.html#gse-coordinates">GSE coordinates</a></li>
<li class="toctree-l2"><a class="reference internal" href="ex_openggcm.html#time-series">Time Series</a></li>
<li class="toctree-l2"><a class="reference internal" href="ex_openggcm.html#ionosphere-files">Ionosphere Files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ex_calc.html">Calculator Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ex_calc.html#streamlines">Streamlines</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="command_line.html">Command Line Utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="command_line.html#viscid-2d">viscid_2d</a></li>
<li class="toctree-l2"><a class="reference internal" href="command_line.html#viscid-ts">viscid_ts</a></li>
<li class="toctree-l2"><a class="reference internal" href="command_line.html#viscid-diff">viscid_diff</a></li>
<li class="toctree-l2"><a class="reference internal" href="command_line.html#athena2xdmf">athena2xdmf</a></li>
<li class="toctree-l2"><a class="reference internal" href="command_line.html#bitmaskbits">bitmaskbits</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">viscid</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="viscid.html">viscid package</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">Viscid</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="index.html">Docs</a> &raquo;</li>
  <li><a href="">viscid.vutil module</a></li>
  
</ul>
<hr/>

          
  <div class="section" id="module-viscid.vutil">
<span id="viscid-vutil-module"></span><h1>viscid.vutil module<a class="headerlink" href="#module-viscid.vutil" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="viscid.vutil.add_animate_arguments">
<tt class="descclassname">viscid.vutil.</tt><tt class="descname">add_animate_arguments</tt><big>(</big><em>parser</em><big>)</big><a class="reference internal" href="_modules/viscid/vutil.html#add_animate_arguments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viscid.vutil.add_animate_arguments" title="Permalink to this definition">¶</a></dt>
<dd><p>add common options for animating, you may want to make sure parser was
constructed with conflict_handler=&#8217;resolve&#8217;</p>
</dd></dl>

<dl class="function">
<dt id="viscid.vutil.add_mpl_output_arguments">
<tt class="descclassname">viscid.vutil.</tt><tt class="descname">add_mpl_output_arguments</tt><big>(</big><em>parser</em><big>)</big><a class="reference internal" href="_modules/viscid/vutil.html#add_mpl_output_arguments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viscid.vutil.add_mpl_output_arguments" title="Permalink to this definition">¶</a></dt>
<dd><p>add common options for tuning matplotlib output, you may want to make
sure parser was constructed with conflict_handler=&#8217;resolve&#8217;</p>
</dd></dl>

<dl class="function">
<dt id="viscid.vutil.common_argparse">
<tt class="descclassname">viscid.vutil.</tt><tt class="descname">common_argparse</tt><big>(</big><em>parser</em>, <em>default_verb=0</em>, <em>logging_fmt=None</em><big>)</big><a class="reference internal" href="_modules/viscid/vutil.html#common_argparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viscid.vutil.common_argparse" title="Permalink to this definition">¶</a></dt>
<dd><p>add some common verbosity stuff to argparse, parse the
command line args, and setup the logging levels
parser should be an ArgumentParser instance, and kwargs
should be options that get passed to logger.basicConfig
returns the args namespace</p>
</dd></dl>

<dl class="function">
<dt id="viscid.vutil.convert_floating_slice">
<tt class="descclassname">viscid.vutil.</tt><tt class="descname">convert_floating_slice</tt><big>(</big><em>arr</em>, <em>start</em>, <em>stop=None</em>, <em>step=None</em>, <em>endpoint=True</em>, <em>tol=100</em><big>)</big><a class="reference internal" href="_modules/viscid/vutil.html#convert_floating_slice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viscid.vutil.convert_floating_slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Be able to slice using floats relative to an array</p>
<p>The idea is that [0.1, 0.2, 0.3, 0.4, 0.5, 0.6][0.2:0.6:2] should
be able to give you [0.2, 0.4, 0.6]. This function will handle all
the paticulars, like when to include what and what if step &lt; 1 etc.</p>
<dl class="docutils">
<dt>The rules for when something is included are:</dt>
<dd><ul class="first last simple">
<li>The slice will never include elements whose value in arr
are &lt; start (or &gt; if the slice is backward)</li>
<li>The slice will never include elements whose value in arr
are &gt; stop (or &lt; if the slice is backward)</li>
<li>!! The slice WILL INCLUDE stop if you don&#8217;t change endpoint.
This is different from normal slicing, but
it&#8217;s more natural when specifying a slice as a float.
To this end, an epsilon tolerance can be given to
determine what&#8217;s close enough.</li>
<li>TODO: implement floating point steps, this is tricky
since arr need not be uniformly spaced, so step is
ambiguous in this case</li>
</ul>
</dd>
<dt>Args:</dt>
<dd><p class="first">arr (ndarray): filled with floats to do the lookup
start (None, int, float): like slice().start
stop (None, int, float): like slice().start
step (None, int, float): like slice().start
endpoint (bool): iff True then include stop in the slice.</p>
<blockquote>
<div>Set to False to get python slicing symantics when it
comes to excluding stop, but fair warning, python
symantics feel awkward here. Consider the case
[0.1, 0.2, 0.3][:0.25]. If you think this should include
0.2, then leave keep endpoint=True.</div></blockquote>
<dl class="last docutils">
<dt>tol (int): number of machine epsilons to consider</dt>
<dd>&#8220;close enough&#8221;</dd>
</dl>
</dd>
<dt>Returns:</dt>
<dd>start, stop, step after floating point vals have been
converted to integers</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="viscid.vutil.find_field">
<tt class="descclassname">viscid.vutil.</tt><tt class="descname">find_field</tt><big>(</big><em>vfile</em>, <em>fld_name_lst</em><big>)</big><a class="reference internal" href="_modules/viscid/vutil.html#find_field"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viscid.vutil.find_field" title="Permalink to this definition">¶</a></dt>
<dd><p>convenience function to get a field that could be called many things
returns the first fld_name in the list that is in the file</p>
</dd></dl>

<dl class="function">
<dt id="viscid.vutil.format_datetime">
<tt class="descclassname">viscid.vutil.</tt><tt class="descname">format_datetime</tt><big>(</big><em>dt</em>, <em>fmt</em><big>)</big><a class="reference internal" href="_modules/viscid/vutil.html#format_datetime"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viscid.vutil.format_datetime" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper around datetime.datetime.strftime</p>
<p>This function allows one to specify the precision of fractional
seconds (mircoseconds) using something like &#8216;%2f&#8217; to round to
the nearest hundredth of a second.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><p class="first">dt (datetime.datetime): time to format
fmt (str): format string that strftime understands with the</p>
<blockquote class="last">
<div>addition of &#8216;%.?[0-9]f&#8217; to the syntax.</div></blockquote>
</dd>
<dt>Returns:</dt>
<dd>str</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="viscid.vutil.format_time">
<tt class="descclassname">viscid.vutil.</tt><tt class="descname">format_time</tt><big>(</big><em>t</em>, <em>style='.02f'</em><big>)</big><a class="reference internal" href="_modules/viscid/vutil.html#format_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viscid.vutil.format_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Format time as a string</p>
<dl class="docutils">
<dt>Note:</dt>
<dd>If t is a datetime.datetime instance, then this function
returns the result of format_datetime(t, style), which is
basically datetime.datetime.strftime</dd>
<dt>Args:</dt>
<dd><p class="first">t (float): time
style (str): for this method, can be:</p>
<div class="last highlight-python"><div class="highlight"><pre>style          |   time   | string
--------------------------------------------------
&#39;hms&#39;          | 90015.0  | &quot;25:00:15.000&quot;
&#39;hms&#39;          | 90000.0  | &quot;1 day 01:00:15.000&quot;
&#39;hmss&#39;         | 90015.0  | &quot;25:00:15.000 (90015)&quot;
&#39;dhms&#39;         |   900.0  | &quot;0 days 00:15:00.000&quot;
&#39;.02f&#39;         |   900.0  | &#39;900.00&#39;
</pre></div>
</div>
</dd>
<dt>Returns:</dt>
<dd>str</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="viscid.vutil.make_animation">
<tt class="descclassname">viscid.vutil.</tt><tt class="descname">make_animation</tt><big>(</big><em>args</em>, <em>program='ffmpeg'</em><big>)</big><a class="reference internal" href="_modules/viscid/vutil.html#make_animation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viscid.vutil.make_animation" title="Permalink to this definition">¶</a></dt>
<dd><p>make animation by calling program (only ffmpeg works for now) using
args, which is a namespace filled by the argparse options from
add_animate_arguments. Plots are expected to be named
${args.prefix}_000001.png where the number is in order from 1 up</p>
</dd></dl>

<dl class="function">
<dt id="viscid.vutil.make_fwd_slice">
<tt class="descclassname">viscid.vutil.</tt><tt class="descname">make_fwd_slice</tt><big>(</big><em>shape</em>, <em>slices</em>, <em>reverse=None</em>, <em>cull_second=True</em><big>)</big><a class="reference internal" href="_modules/viscid/vutil.html#make_fwd_slice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viscid.vutil.make_fwd_slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure slices go forward</p>
<p>This function returns two slices equivalent to <cite>slices</cite> such
that the first slice always goes forward. This is necessary because
h5py can&#8217;t deal with reverse slices such as [::-1].</p>
<p>The optional <cite>reverse</cite> can be used to interpret a dimension as
flipped. This is used if the indices in a slice are based on a
coordinate array that has already been flipped. For instance, the
result is equivalent to <cite>arr[::-1][slices]</cite>, but in a way that can
be  handled by h5py. This lets us efficiently load small subsets
of large arrays on disk, which is most useful when the large array
is coming through sshfs.</p>
<dl class="docutils">
<dt>Note: The only restriction on slices is that neither start nor stop</dt>
<dd>can be outide the range [-L, L].</dd>
<dt>Args:</dt>
<dd><p class="first">shape: shape of the array that is to be sliced
slices: a tuple of slices to work with
reverse (optional): list of bools that indicate if the</p>
<blockquote>
<div>corresponding value in slices should be ineterpreted as
flipped</div></blockquote>
<dl class="last docutils">
<dt>cull_second (bool, optional): iff True, remove elements of</dt>
<dd>the second slice for dimensions that don&#8217;t exist after
the first slice has completed. This is only here for
a super-hacky case when slicing fields.</dd>
</dl>
</dd>
<dt>Returns:</dt>
<dd><p class="first">(first_slice, second_slice)</p>
<dl class="last docutils">
<dt>first_slice: a forward-only slice that retrieves the</dt>
<dd>desired elements of an array</dd>
<dt>second_slice: a slice that does [::1] or [::-1] as needed</dt>
<dd>to make the result equivalent to slices. If keep_all,
then this may contain None indicating that this
dimension no longer exists after the first slice.</dd>
</dl>
</dd>
<dt>Examples:</dt>
<dd><p class="first">&gt;&gt; a = np.arange(8)
&gt;&gt; first, second = make_fwd_slice(len(a),slice(None, None, -1))
&gt;&gt; (a[::-1] == a[first][second]).all()
True</p>
<p>&gt;&gt; a = np.arange(4*5*6).reshape((4, 5, 6))
&gt;&gt; first, second = make_fwd_slice(a.shape,</p>
<blockquote>
<div><dl class="docutils">
<dt>[slice(None, -1, 1),</dt>
<dd>slice(-1, None, 1),
slice(-4, -1, 2)],</dd>
</dl>
<p>[True, True, True])</p>
</div></blockquote>
<p class="last">&gt;&gt; a1 = a[::-1, ::-1, ::-1][:-1, -1:, -4:-1:2]
&gt;&gt; a2 = a[first][second]
&gt;&gt; a1 == a2
True</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="viscid.vutil.make_slice_inclusive">
<tt class="descclassname">viscid.vutil.</tt><tt class="descname">make_slice_inclusive</tt><big>(</big><em>start</em>, <em>stop=None</em>, <em>step=None</em><big>)</big><a class="reference internal" href="_modules/viscid/vutil.html#make_slice_inclusive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viscid.vutil.make_slice_inclusive" title="Permalink to this definition">¶</a></dt>
<dd><p>Extend the end of a slice by 1 element</p>
<p>Chances are you don&#8217;t want to use this function.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>start (int, None): same as a slice.start
stop (int, None): same as a slice.stop
step (int, None): same as a slice.step</dd>
<dt>Returns:</dt>
<dd>(start, stop, step) To be given to slice()</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="viscid.vutil.split_floats">
<tt class="descclassname">viscid.vutil.</tt><tt class="descname">split_floats</tt><big>(</big><em>arg_str</em><big>)</big><a class="reference internal" href="_modules/viscid/vutil.html#split_floats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viscid.vutil.split_floats" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="viscid.vutil.str_to_value">
<tt class="descclassname">viscid.vutil.</tt><tt class="descname">str_to_value</tt><big>(</big><em>s</em><big>)</big><a class="reference internal" href="_modules/viscid/vutil.html#str_to_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viscid.vutil.str_to_value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="viscid.vutil.subclass_spider">
<tt class="descclassname">viscid.vutil.</tt><tt class="descname">subclass_spider</tt><big>(</big><em>cls</em><big>)</big><a class="reference internal" href="_modules/viscid/vutil.html#subclass_spider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viscid.vutil.subclass_spider" title="Permalink to this definition">¶</a></dt>
<dd><p>return recursive list of subclasses of cls (depth first)</p>
</dd></dl>

<dl class="function">
<dt id="viscid.vutil.timeit">
<tt class="descclassname">viscid.vutil.</tt><tt class="descname">timeit</tt><big>(</big><em>f</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/viscid/vutil.html#timeit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viscid.vutil.timeit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="viscid.vutil.timereps">
<tt class="descclassname">viscid.vutil.</tt><tt class="descname">timereps</tt><big>(</big><em>reps</em>, <em>func</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/viscid/vutil.html#timereps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#viscid.vutil.timereps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>


          <footer>
  <hr/>

  <p>
      &copy; Copyright 2015, Kristofor Maynard.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://www.readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>